{"additions": 107, "auther_ref": "from-CMSSW_11_0_X_2019-11-01-2300_MAHI", "auther_sha": "b9e8b579a29074c5cfd157b9c581a5b51bd0193a", "author": "mariadalfonso", "body": "This PR move Mahi from double to float.\r\nSmall differences seen in the energy, more on the arrivalTime.\r\nhttp://dalfonso.web.cern.ch/dalfonso/HCAL/HCAL_PR28366.pdf\r\n\r\nIn addition 8% speed up gain is achieved in the minimize function see igprof results below\r\n\r\n-- release  --\r\n\r\n```\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n           82.3  .........      54.85 / 55.09        MahiFit::phase1Apply(HBHEChannelInfo const&, float&, float&, bool&, float&) const [18]\r\n[19]       82.3      54.85       2.92 / 51.93      MahiFit::doFit(std::array<float, 3ul>&, int) const\r\n           60.8  .........      40.54 / 40.54        MahiFit::minimize() const [20]\r\n            9.4  .........       6.26 / 6.26         MahiFit::calculateArrivalTime() const [25]\r\n            7.5  .........       5.03 / 5.03         MahiFit::updatePulseShape(double, Eigen::Matrix<double, -1, 1, 0, 19, 1>&, Eigen::Matrix<double, -1, 1, 0, 19, 1>&, Eigen::Matrix<double, -1, -1, $\r\nnst [28]\r\n\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n           60.8  .........      40.54 / 54.85        MahiFit::doFit(std::array<float, 3ul>&, int) const [19]\r\n[20]       60.8      40.54       0.39 / 40.15      MahiFit::minimize() const\r\n           31.7  .........      21.15 / 21.15        MahiFit::nnls() const [21]\r\n           15.8  .........      10.56 / 10.56        MahiFit::updateCov() const [23]\r\n            7.7  .........       5.14 / 5.14         MahiFit::onePulseMinimize() const [27]\r\n            4.9  .........       3.26 / 3.26         MahiFit::calculateChiSq() const [33]\r\n```\r\n \r\n\r\n-- this PR  --\r\n\r\n```\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n           81.7  .........      50.65 / 50.90        MahiFit::phase1Apply(HBHEChannelInfo const&, float&, float&, bool&, float&) const [18]\r\n[19]       81.7      50.65       2.03 / 48.61      MahiFit::doFit(std::array<float, 3ul>&, int) const\r\n           59.3  .........      36.76 / 36.76        MahiFit::minimize() const [20]\r\n           10.6  .........       6.60 / 6.60         MahiFit::calculateArrivalTime(unsigned int) const [25]\r\n            8.3  .........       5.13 / 5.13         MahiFit::updatePulseShape(float, Eigen::Matrix<float, -1, 1, 0, 15, 1>&, Eigen::Matrix<float, -1, 1, 0, 15, 1>&, Eigen::Matrix<float, -1, -1, 0, 1$\r\n>&) const [27]\r\n\r\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n           59.3  .........      36.76 / 50.65        MahiFit::doFit(std::array<float, 3ul>&, int) const [19]\r\n[20]       59.3      36.76       0.39 / 36.37      MahiFit::minimize() const\r\n           31.3  .........      19.39 / 19.39        MahiFit::nnls() const [21]\r\n           15.4  .........       9.54 / 9.54         MahiFit::updateCov(Eigen::Matrix<float, -1, -1, 0, 8, 8> const&) const [23]\r\n            6.9  .........       4.29 / 4.29         MahiFit::onePulseMinimize() const [29]\r\n            5.0  .........       3.10 / 3.10         MahiFit::calculateChiSq() const [35]\r\n\r\n```\r\n", "branch": "master", "changed_files": 8, "comments": 31, "commits": 6, "created_at": "1573205022", "deletions": 110, "labels": ["code-checks-approved", "comparison-available", "orp-pending", "pending-signatures", "reconstruction-pending", "tests-rejected"], "milestone": "CMSSW_11_0_X", "number": 28366, "release-notes": [], "review_comments": 0, "state": "open", "title": "HBHE: spped up + mahi move double to float", "updated_at": "1573417426", "user": "mariadalfonso"}