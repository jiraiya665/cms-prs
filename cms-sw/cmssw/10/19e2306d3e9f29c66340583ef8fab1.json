{"additions": 46, "auther_ref": "JERfractionsFix11X", "auther_sha": "4278158f253abf36f5ae4d8e4248dbef57649ce6", "author": "ahinzmann", "body": "#### PR description:\r\n\r\nAs currently implemented, jet resolution smearing breaks the jet energy fraction variables of pat::Jets.\r\nThis line of code changes the four-vector of a pat::Jet, but not the correction factors stored in the pat::Jet:\r\nhttps://github.com/cms-sw/cmssw/blob/CMSSW_8_0_25/PhysicsTools/PatUtils/interface/SmearedJetProducerT.h#L267\r\nJet energy fraction calculation relies on the fact that one can retried the raw jet energy with the stored correction factors:\r\nhttps://github.com/cms-sw/cmssw/blob/master/DataFormats/PatCandidates/interface/Jet.h#L376\r\n\r\nThis fix to the scaleEnergy method adjusts the stored correction factors, to be able to retrieve the raw jet energy again.\r\n\r\nJet resolution smearing is run during MiniAOD production and also in this test:\r\nhttps://github.com/cms-sw/cmssw/blob/master/PhysicsTools/PatAlgos/test/corMETFromMiniAOD.py\r\n\r\nNo changes are expected as it only affects workflows that first apply jet energy resolution smearing and then apply a jet ID (does not happen in MiniAOD/NanoAOD production itself).\r\n\r\n#### PR validation:\r\n\r\nIt was checked that jet energy fractions are the same before and after jet energy resolution smearing with this fix.", "branch": "master", "changed_files": 4, "comments": 40, "commits": 7, "created_at": "1562074390", "deletions": 22, "labels": ["analysis-pending", "code-checks-rejected", "comparison-pending", "orp-pending", "pending-signatures", "reconstruction-pending", "tests-pending"], "milestone": "CMSSW_11_0_X", "number": 27428, "release-notes": [], "review_comments": 6, "state": "open", "title": "Fix jet energy fractions after jet resolution smearing", "updated_at": "1562838849", "user": "ahinzmann"}