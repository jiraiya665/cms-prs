{"additions": 255, "auther_ref": "dqm-new-legacy-io", "auther_sha": "b6273b73318fbccc71c3f2225084e608442046da", "author": "schneiml", "body": "#### PR description:\r\nIn offline, the legacy TDirectory files for the DQMGUI are written by the `DQMFileSaver` module. While reading the code and its configurations, it became apparent that this module is not actually used in online or HLT (any more?), even though most of the code is dedicated to these cases. (Online and HLT use `DQMServices/FileIO` now.)\r\n\r\nSo, I stripped down this module to prove the hypothesis. \r\n\r\nIn addition, this PR contains the new TDirectory writing code by @andrius-k, which is part of this module rather than the DQMStore. That is a useful step to get rid of the IO code inside the DQMStore in the future.\r\n\r\n#### PR validation:\r\n\r\nThis PR needs testing in online DQM (not done yet) and ideally also in HLT (or a solid confirmation that the module is never loaded in HLT).\r\n\r\nThis PR needs testing in Tier0 Express processing, where the `runIsComplete` logic is used.\r\n\r\nThe main point of the PR is to test\r\n- That only a single mode of this module is used in offline, to be confirmed by the IB tests;\r\n- That the new TDirectory writing code works;\r\n- Which unit tests depend on behavior removed in this PR.\r\n\r\nI suspect some tests to fail (assuming these tests are run in the PR tests, not sure about that), and some flaws in the TDirectory writing code (it does not support QTests yet, for example).\r\n\r\n", "branch": "master", "changed_files": 5, "comments": 19, "commits": 5, "created_at": "1575914465", "deletions": 650, "labels": ["code-checks-approved", "comparison-available", "dqm-pending", "orp-pending", "pending-signatures", "tests-approved"], "milestone": "CMSSW_11_1_X", "number": 28588, "release-notes": [], "review_comments": 0, "state": "open", "title": "DQM: new DQMFileSaver", "updated_at": "1575984643", "user": "schneiml"}